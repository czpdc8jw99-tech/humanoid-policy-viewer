# 步骤 1 验证指南：导入策略，速度为0

## 🎯 目标
验证策略能正常加载，机器人能保持站立（命令为0时）

## 📋 验证步骤

### 1. 启动开发服务器
```bash
npm run dev
```

### 2. 打开浏览器
访问开发服务器地址（通常是 `http://localhost:5173`）

### 3. 打开浏览器开发者工具
- 按 `F12` 或右键 → "检查"
- 切换到 **Console** 标签

### 4. 选择策略
1. 在策略下拉框中选择 **"G1 Locomotion (Gamepad)"**
2. 等待策略加载完成（进度条消失）

### 5. 开始仿真
1. 点击 **"Play"** 按钮（或按空格键）
2. 观察场景中的机器人

### 6. 验证点检查清单

#### ✅ 策略加载验证
- [ ] 控制台显示：`[PolicyRunner] Policy initialized:` 
  - 应该显示：`numActions: 29`, `numObs: 96`
  - 应该显示观察模块列表（RootAngVelB, ProjectedGravityB, Command, JointPosRel, JointVel, PrevActions）

#### ✅ 观察向量验证
- [ ] 控制台显示：`[PolicyRunner] Observation vector built:`
  - `totalSize: 96`（应该等于 `expectedSize: 96`）
  - `commandInObs: [0, 0, 0]`（命令值应该为0）

#### ✅ 推理验证
- [ ] 控制台显示：`[PolicyRunner] Inference successful:`
  - `actionLength: 29`（29个关节）
  - `actionRange: [min, max]`（动作值范围）
  - `command: [0, 0, 0]`（命令值应该为0）

#### ✅ 视觉验证
- [ ] 机器人出现在场景中
- [ ] 机器人保持站立姿态（不摔倒）
- [ ] 机器人保持默认姿态（default_joint_pos）
- [ ] 机器人不移动（因为命令为0）

#### ✅ 错误检查
- [ ] 控制台**没有**红色错误信息
- [ ] 策略加载**没有**失败提示
- [ ] ONNX 模型**没有**加载错误

## 🐛 如果出现问题

### 问题1：策略加载失败
- **检查**：控制台错误信息
- **可能原因**：ONNX 文件路径错误、文件不存在
- **解决**：检查 `public/examples/checkpoints/g1/policy_loco_29dof.onnx` 是否存在

### 问题2：观察向量维度不匹配
- **检查**：控制台显示的 `totalSize` 和 `expectedSize`
- **可能原因**：观察模块配置错误
- **解决**：检查 `loco_policy_29dof.json` 中的 `obs_config`

### 问题3：机器人摔倒
- **检查**：控制台是否有推理错误
- **可能原因**：PD 参数不正确、动作值异常
- **解决**：检查 `stiffness` 和 `damping` 参数

### 问题4：机器人移动（不应该移动）
- **检查**：控制台显示的 `command` 值
- **可能原因**：命令值不是 [0, 0, 0]
- **解决**：检查 `_updateGamepadCommand()` 是否被调用，检查命令初始化

## ✅ 成功标准

如果以下所有条件都满足，**步骤 1 验证成功**：

1. ✅ 策略成功加载（控制台有初始化日志）
2. ✅ 观察向量构建正确（96维）
3. ✅ 推理成功（返回29维动作）
4. ✅ 命令值为 [0, 0, 0]
5. ✅ 机器人保持站立，不移动
6. ✅ 控制台无错误信息

## 📝 下一步

如果步骤 1 验证成功，我们将进行：
- **步骤 2**：固定速度值测试（硬编码命令值，验证机器人能响应命令移动）

---

**提示**：如果验证成功，请告诉我，我们继续步骤 2！
