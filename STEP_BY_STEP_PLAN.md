# 游戏手柄控制 - 分步验证计划（优化版）

> **原则**：每一步都是小的改动，每一步都能在网页上立即验证效果
> **思路**：先导入策略（速度为0）→ 固定速度值 → 接入手柄

---

## ✅ 步骤 1：导入策略，速度为0（基础验证）

**目标**：验证策略能正常加载，机器人能保持站立（命令为0时）

**改动内容**：
- 确保策略配置文件正确
- 确保 ONNX 模型能加载
- 验证命令为 [0, 0, 0] 时，策略能正常运行

**验证方法**：
1. 运行 `npm run dev`
2. 打开浏览器，选择 "G1 Locomotion (Gamepad)" 策略
3. 点击 "Play" 开始仿真
4. **验证点**：
   - [ ] 策略能成功加载（无错误提示）
   - [ ] 机器人出现在场景中
   - [ ] 机器人能保持站立（不摔倒）
   - [ ] 机器人保持默认姿态（default_joint_pos）
   - [ ] 控制台无错误信息

**预期结果**：策略加载成功，机器人能稳定站立

**如果失败**：检查策略配置文件路径、ONNX 模型路径、观察向量构建

---

## ✅ 步骤 2：固定速度值测试（命令响应验证）

**目标**：验证策略能响应非零命令值，机器人开始移动

**改动内容**：
- 临时硬编码命令值（如：`vx = 0.3, vy = 0.0, wz = 0.0`）
- 移除游戏手柄依赖，直接设置命令

**验证方法**：
1. 修改代码，设置固定命令值（如：前进速度 0.3）
2. 刷新网页，选择策略，开始仿真
3. **验证点**：
   - [ ] 命令值正确传递到策略（控制台日志）
   - [ ] 观察向量包含正确的命令值
   - [ ] 策略推理返回有效动作
   - [ ] 机器人开始向前移动
   - [ ] 机器人移动方向正确（向前）

**预期结果**：机器人能响应固定命令值，开始移动

**如果失败**：检查命令传递流程、观察向量构建、动作应用

---

## ✅ 步骤 3：接入手柄（实时输入验证）

**目标**：验证游戏手柄输入能实时控制机器人

**改动内容**：
- 恢复游戏手柄输入处理
- 确保命令值实时更新

**验证方法**：
1. 连接游戏手柄
2. 选择策略，开始仿真
3. 移动左摇杆和右摇杆
4. **验证点**：
   - [ ] 手柄连接状态正确显示
   - [ ] 命令值实时更新（UI 显示）
   - [ ] 机器人响应手柄输入
   - [ ] 左摇杆控制移动（前进/后退/左右）
   - [ ] 右摇杆 X 轴控制转向

**预期结果**：机器人能实时响应游戏手柄输入

**如果失败**：检查游戏手柄 API、命令更新频率、死区处理

---

## 🎯 现在开始：步骤 1 - 导入策略，速度为0

让我们先验证策略能否正常加载和运行。
